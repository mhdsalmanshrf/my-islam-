<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habits Tracker - MyIslam</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                        'arabic': ['Amiri', 'serif'],
                    },
                    colors: {
                        'clay': {
                            50: '#f8f9fa',
                            100: '#e9ecef',
                            200: '#dee2e6',
                            300: '#ced4da',
                            400: '#adb5bd',
                            500: '#6c757d',
                            600: '#495057',
                            700: '#343a40',
                            800: '#212529',
                            900: '#1a1d20',
                        },
                        'islamic': {
                            50: '#f0f9f4',
                            100: '#dcf2e4',
                            200: '#bbe5cc',
                            300: '#88d1a7',
                            400: '#52b57a',
                            500: '#2d9d5a',
                            600: '#227d47',
                            700: '#1e633a',
                            800: '#1a5030',
                            900: '#164329',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gradient-to-br from-clay-50 to-clay-100 min-h-screen font-sans">
    <!-- Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-lg border-t border-clay-200 z-50 pb-safe">
        <div class="flex justify-around items-center py-2">
            <a href="index.html" class="nav-item flex flex-col items-center p-2 rounded-lg transition-all duration-200">
                <div class="w-6 h-6 mb-1 bg-clay-300 rounded-lg flex items-center justify-center">
                    <span class="text-clay-600 text-xs">üè†</span>
                </div>
                <span class="text-xs font-medium text-clay-600">Home</span>
            </a>
            <a href="prayer.html" class="nav-item flex flex-col items-center p-2 rounded-lg transition-all duration-200">
                <div class="w-6 h-6 mb-1 bg-clay-300 rounded-lg flex items-center justify-center">
                    <span class="text-clay-600 text-xs">üïå</span>
                </div>
                <span class="text-xs font-medium text-clay-600">Prayer</span>
            </a>
            <a href="qibla.html" class="nav-item flex flex-col items-center p-2 rounded-lg transition-all duration-200">
                <div class="w-6 h-6 mb-1 bg-clay-300 rounded-lg flex items-center justify-center">
                    <span class="text-clay-600 text-xs">üß≠</span>
                </div>
                <span class="text-xs font-medium text-clay-600">Qibla</span>
            </a>
            <a href="quran.html" class="nav-item flex flex-col items-center p-2 rounded-lg transition-all duration-200">
                <div class="w-6 h-6 mb-1 bg-clay-300 rounded-lg flex items-center justify-center">
                    <span class="text-clay-600 text-xs">üìñ</span>
                </div>
                <span class="text-xs font-medium text-clay-600">Quran</span>
            </a>
            <a href="more.html" class="nav-item flex flex-col items-center p-2 rounded-lg transition-all duration-200">
                <div class="w-6 h-6 mb-1 bg-clay-300 rounded-lg flex items-center justify-center">
                    <span class="text-clay-600 text-xs">‚ãØ</span>
                </div>
                <span class="text-xs font-medium text-clay-600">More</span>
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pb-20 px-4 pt-6">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-clay-800 mb-2">Habits Tracker</h1>
            <p class="text-clay-600">Track your Islamic practices</p>
        </header>

        <!-- Current Streak -->
        <section class="mb-8">
            <div class="bg-gradient-to-r from-islamic-50 to-islamic-100 rounded-2xl p-6 shadow-lg border border-islamic-200 text-center">
                <h2 class="text-xl font-semibold text-islamic-800 mb-2">Current Streak</h2>
                <div class="text-4xl font-bold text-islamic-700 mb-2" id="current-streak">7</div>
                <div class="text-islamic-600">Days</div>
                <div class="mt-4">
                    <div class="text-sm text-islamic-700 mb-2">Best Streak: <span id="best-streak">14</span> days</div>
                    <div class="w-full bg-islamic-200 rounded-full h-2">
                        <div class="bg-islamic-500 h-2 rounded-full" style="width: 50%" id="streak-progress"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Today's Habits -->
        <section class="mb-8">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-semibold text-clay-800">Today's Habits</h2>
                <span class="text-sm text-clay-600" id="today-date">Today, Oct 3</span>
            </div>
            <div class="space-y-3" id="habits-list">
                <!-- Habits will be populated by JavaScript -->
            </div>
        </section>

        <!-- Weekly Progress -->
        <section class="mb-8">
            <h2 class="text-xl font-semibold text-clay-800 mb-4">This Week</h2>
            <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-clay-200">
                <div class="grid grid-cols-7 gap-2 mb-4">
                    <div class="text-center">
                        <div class="text-xs text-clay-500 mb-2">Sun</div>
                        <div class="w-8 h-8 bg-islamic-500 rounded-full flex items-center justify-center text-white text-xs font-semibold" id="day-0">7</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xs text-clay-500 mb-2">Mon</div>
                        <div class="w-8 h-8 bg-islamic-500 rounded-full flex items-center justify-center text-white text-xs font-semibold" id="day-1">7</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xs text-clay-500 mb-2">Tue</div>
                        <div class="w-8 h-8 bg-islamic-500 rounded-full flex items-center justify-center text-white text-xs font-semibold" id="day-2">7</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xs text-clay-500 mb-2">Wed</div>
                        <div class="w-8 h-8 bg-islamic-500 rounded-full flex items-center justify-center text-white text-xs font-semibold" id="day-3">7</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xs text-clay-500 mb-2">Thu</div>
                        <div class="w-8 h-8 bg-islamic-500 rounded-full flex items-center justify-center text-white text-xs font-semibold" id="day-4">7</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xs text-clay-500 mb-2">Fri</div>
                        <div class="w-8 h-8 bg-islamic-500 rounded-full flex items-center justify-center text-white text-xs font-semibold" id="day-5">7</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xs text-clay-500 mb-2">Sat</div>
                        <div class="w-8 h-8 bg-islamic-300 rounded-full flex items-center justify-center text-white text-xs font-semibold" id="day-6">0</div>
                    </div>
                </div>
                <div class="text-center text-sm text-clay-600">
                    Weekly Average: <span class="font-semibold text-clay-800" id="weekly-average">85%</span>
                </div>
            </div>
        </section>

        <!-- Monthly Calendar -->
        <section class="mb-8">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-semibold text-clay-800">October 2025</h2>
                <div class="flex space-x-2">
                    <button id="prev-month" class="clay-button p-2">
                        <span class="text-lg">‚Üê</span>
                    </button>
                    <button id="next-month" class="clay-button p-2">
                        <span class="text-lg">‚Üí</span>
                    </button>
                </div>
            </div>
            <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-clay-200">
                <div class="grid grid-cols-7 gap-1 mb-2">
                    <div class="text-center text-xs text-clay-500 py-2">Sun</div>
                    <div class="text-center text-xs text-clay-500 py-2">Mon</div>
                    <div class="text-center text-xs text-clay-500 py-2">Tue</div>
                    <div class="text-center text-xs text-clay-500 py-2">Wed</div>
                    <div class="text-center text-xs text-clay-500 py-2">Thu</div>
                    <div class="text-center text-xs text-clay-500 py-2">Fri</div>
                    <div class="text-center text-xs text-clay-500 py-2">Sat</div>
                </div>
                <div class="grid grid-cols-7 gap-1" id="calendar-grid">
                    <!-- Calendar days will be populated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Statistics -->
        <section class="mb-8">
            <h2 class="text-xl font-semibold text-clay-800 mb-4">Statistics</h2>
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 shadow-md border border-clay-200 text-center">
                    <div class="text-2xl font-bold text-islamic-600" id="total-days">45</div>
                    <div class="text-sm text-clay-600">Total Days</div>
                </div>
                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 shadow-md border border-clay-200 text-center">
                    <div class="text-2xl font-bold text-islamic-600" id="completion-rate">78%</div>
                    <div class="text-sm text-clay-600">Completion Rate</div>
                </div>
                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 shadow-md border border-clay-200 text-center">
                    <div class="text-2xl font-bold text-islamic-600" id="perfect-days">12</div>
                    <div class="text-sm text-clay-600">Perfect Days</div>
                </div>
                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 shadow-md border border-clay-200 text-center">
                    <div class="text-2xl font-bold text-islamic-600" id="habit-score">8.5</div>
                    <div class="text-sm text-clay-600">Habit Score</div>
                </div>
            </div>
        </section>

        <!-- Motivation -->
        <section class="mb-8">
            <div class="bg-gradient-to-r from-islamic-50 to-islamic-100 rounded-2xl p-6 shadow-lg border border-islamic-200">
                <h2 class="text-xl font-semibold text-islamic-800 mb-4">Keep Going! üåü</h2>
                <p class="text-islamic-700 mb-4">
                    "And those who strive for Us - We will surely guide them to Our ways. And indeed, Allah is with the doers of good."
                </p>
                <p class="text-islamic-600 text-sm">Quran 29:69</p>
            </div>
        </section>
    </main>

    <script src="main.js"></script>
    <script>
        // Habits Tracker Page Specific JavaScript
        class HabitsTracker {
            constructor() {
                this.habits = [
                    { id: 'fajr', name: 'Fajr Prayer', icon: 'üåÖ', category: 'prayer', streak: 7 },
                    { id: 'dhuhr', name: 'Dhuhr Prayer', icon: '‚òÄÔ∏è', category: 'prayer', streak: 7 },
                    { id: 'asr', name: 'Asr Prayer', icon: 'üå§Ô∏è', category: 'prayer', streak: 7 },
                    { id: 'maghrib', name: 'Maghrib Prayer', icon: 'üåÖ', category: 'prayer', streak: 7 },
                    { id: 'isha', name: 'Isha Prayer', icon: 'üåô', category: 'prayer', streak: 7 },
                    { id: 'quran', name: 'Quran Reading', icon: 'üìñ', category: 'spiritual', streak: 5 },
                    { id: 'morning-adhkar', name: 'Morning Adhkar', icon: 'üåÑ', category: 'dhikr', streak: 6 },
                    { id: 'evening-adhkar', name: 'Evening Adhkar', icon: 'üåÜ', category: 'dhikr', streak: 4 }
                ];
                
                this.todayProgress = this.loadTodayProgress();
                this.currentStreak = 7;
                this.bestStreak = 14;
                this.currentMonth = new Date().getMonth();
                this.currentYear = new Date().getFullYear();
                
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.displayHabits();
                this.updateStreakDisplay();
                this.generateCalendar();
                this.updateStatistics();
                this.updateWeeklyProgress();
                this.updateDateDisplay();
            }

            setupEventListeners() {
                // Month navigation
                document.getElementById('prev-month')?.addEventListener('click', () => {
                    this.navigateMonth(-1);
                });

                document.getElementById('next-month')?.addEventListener('click', () => {
                    this.navigateMonth(1);
                });
            }

            displayHabits() {
                const habitsList = document.getElementById('habits-list');
                if (!habitsList) return;

                habitsList.innerHTML = '';

                this.habits.forEach(habit => {
                    const isCompleted = this.todayProgress[habit.id] || false;
                    const habitItem = document.createElement('div');
                    habitItem.className = `habit-item ${isCompleted ? 'completed' : ''}`;
                    
                    habitItem.innerHTML = `
                        <div class="flex items-center">
                            <div class="habit-checkbox ${isCompleted ? 'checked' : ''}" data-habit-id="${habit.id}">
                                ${isCompleted ? '‚úì' : ''}
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">${habit.icon}</span>
                                    <div>
                                        <p class="font-semibold text-clay-800">${habit.name}</p>
                                        <p class="text-sm text-clay-600">${habit.streak} day streak</p>
                                    </div>
                                </div>
                            </div>
                            <div class="streak-badge">${habit.streak}</div>
                        </div>
                    `;

                    // Add click handler
                    const checkbox = habitItem.querySelector('.habit-checkbox');
                    checkbox.addEventListener('click', () => {
                        this.toggleHabit(habit.id);
                    });

                    habitsList.appendChild(habitItem);
                });
            }

            toggleHabit(habitId) {
                this.todayProgress[habitId] = !this.todayProgress[habitId];
                
                // Update habit streak
                const habit = this.habits.find(h => h.id === habitId);
                if (habit) {
                    if (this.todayProgress[habitId]) {
                        habit.streak++;
                        this.animateHabitCompletion(habitId);
                    } else {
                        habit.streak = Math.max(0, habit.streak - 1);
                    }
                }

                this.saveTodayProgress();
                this.displayHabits();
                this.updateStreakDisplay();
                this.updateStatistics();
                this.updateWeeklyProgress();
                this.generateCalendar();
            }

            animateHabitCompletion(habitId) {
                const habitItem = document.querySelector(`[data-habit-id="${habitId}"]`).closest('.habit-item');
                
                if (typeof anime !== 'undefined') {
                    anime({
                        targets: habitItem,
                        scale: [1, 1.05, 1],
                        duration: 300,
                        easing: 'easeOutQuad'
                    });
                }

                // Haptic feedback
                if (navigator.vibrate) {
                    navigator.vibrate(50);
                }
            }

            updateStreakDisplay() {
                const completedToday = Object.values(this.todayProgress).filter(Boolean).length;
                const totalHabits = this.habits.length;
                const completionRate = completedToday / totalHabits;

                document.getElementById('current-streak').textContent = this.currentStreak;
                document.getElementById('best-streak').textContent = this.bestStreak;
                document.getElementById('streak-progress').style.width = `${(this.currentStreak / this.bestStreak) * 100}%`;
            }

            updateWeeklyProgress() {
                const today = new Date().getDay();
                
                for (let i = 0; i < 7; i++) {
                    const dayElement = document.getElementById(`day-${i}`);
                    const isToday = i === today;
                    const isCompleted = i < today ? Math.random() > 0.3 : i === today; // Mock data
                    
                    if (dayElement) {
                        dayElement.className = `w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-semibold ${
                            isCompleted ? 'bg-islamic-500' : 'bg-clay-300'
                        }`;
                    }
                }

                // Calculate weekly average
                const completedDays = 6; // Mock data
                const weeklyAverage = Math.round((completedDays / 7) * 100);
                document.getElementById('weekly-average').textContent = `${weeklyAverage}%`;
            }

            generateCalendar() {
                const calendarGrid = document.getElementById('calendar-grid');
                if (!calendarGrid) return;

                calendarGrid.innerHTML = '';

                const firstDay = new Date(this.currentYear, this.currentMonth, 1);
                const lastDay = new Date(this.currentYear, this.currentMonth + 1, 0);
                const startDate = new Date(firstDay);
                startDate.setDate(startDate.getDate() - firstDay.getDay());

                const today = new Date();
                const isCurrentMonth = today.getMonth() === this.currentMonth && today.getFullYear() === this.currentYear;

                for (let i = 0; i < 42; i++) {
                    const currentDate = new Date(startDate);
                    currentDate.setDate(startDate.getDate() + i);
                    
                    const isToday = isCurrentMonth && currentDate.getDate() === today.getDate();
                    const isInMonth = currentDate.getMonth() === this.currentMonth;
                    const completionRate = Math.random(); // Mock completion rate
                    
                    const dayElement = document.createElement('div');
                    dayElement.className = `w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium cursor-pointer transition-all duration-200 ${
                        isToday ? 'ring-2 ring-islamic-500' : ''
                    } ${
                        isInMonth ? 'text-clay-700' : 'text-clay-400'
                    }`;
                    
                    // Set background based on completion
                    if (isInMonth && completionRate > 0.8) {
                        dayElement.classList.add('bg-islamic-500', 'text-white');
                    } else if (isInMonth && completionRate > 0.5) {
                        dayElement.classList.add('bg-islamic-300', 'text-white');
                    } else if (isInMonth && completionRate > 0.2) {
                        dayElement.classList.add('bg-islamic-100', 'text-islamic-700');
                    } else {
                        dayElement.classList.add('bg-clay-100');
                    }
                    
                    dayElement.textContent = currentDate.getDate();
                    calendarGrid.appendChild(dayElement);
                }
            }

            navigateMonth(direction) {
                this.currentMonth += direction;
                
                if (this.currentMonth > 11) {
                    this.currentMonth = 0;
                    this.currentYear++;
                } else if (this.currentMonth < 0) {
                    this.currentMonth = 11;
                    this.currentYear--;
                }
                
                this.generateCalendar();
                this.updateMonthDisplay();
            }

            updateMonthDisplay() {
                const monthNames = [
                    'January', 'February', 'March', 'April', 'May', 'June',
                    'July', 'August', 'September', 'October', 'November', 'December'
                ];
                
                const monthHeader = document.querySelector('h2');
                if (monthHeader) {
                    monthHeader.textContent = `${monthNames[this.currentMonth]} ${this.currentYear}`;
                }
            }

            updateDateDisplay() {
                const today = new Date();
                const options = { 
                    weekday: 'long', 
                    month: 'short', 
                    day: 'numeric' 
                };
                
                const dateElement = document.getElementById('today-date');
                if (dateElement) {
                    dateElement.textContent = today.toLocaleDateString('en-US', options);
                }
            }

            updateStatistics() {
                const completedToday = Object.values(this.todayProgress).filter(Boolean).length;
                const totalHabits = this.habits.length;
                const completionRate = Math.round((completedToday / totalHabits) * 100);
                
                // Mock statistics - in a real app, these would be calculated from historical data
                document.getElementById('total-days').textContent = '45';
                document.getElementById('completion-rate').textContent = `${completionRate}%`;
                document.getElementById('perfect-days').textContent = '12';
                document.getElementById('habit-score').textContent = (completionRate / 10).toFixed(1);
            }

            loadTodayProgress() {
                const today = new Date().toDateString();
                const saved = localStorage.getItem(`habits-progress-${today}`);
                return saved ? JSON.parse(saved) : {};
            }

            saveTodayProgress() {
                const today = new Date().toDateString();
                localStorage.setItem(`habits-progress-${today}`, JSON.stringify(this.todayProgress));
            }
        }

        // Initialize habits tracker
        document.addEventListener('DOMContentLoaded', () => {
            new HabitsTracker();
        });
    </script>
</body>
</html>